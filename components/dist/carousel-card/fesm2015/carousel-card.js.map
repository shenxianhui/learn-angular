{"version":3,"file":"carousel-card.js.map","sources":["ng://carousel-card/lib/carousel-card.component.ts","ng://carousel-card/lib/carousel-card.module.ts","ng://carousel-card/public-api.ts"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { PluginManagerService, componentData } from 'plugin-manager';\n\n@Component({\n  selector: 'llib-carousel-card',\n  templateUrl: './carousel-card.component.html',\n  styleUrls: ['./carousel-card.component.styl']\n})\nexport class CarouselCardComponent implements OnInit {\n\n  data: any;\n  color: any;\n  pageData: Array<any>;\n  pageIndex: number = 0;\n  scrollLeft: number = 0;\n\n  @ViewChild('scrollContainer')\n  scrollContainerDiv: ElementRef\n\n\n  constructor(private pluginManagerService: PluginManagerService, comData: componentData) {\n    // æ¥æ¶ä¸­é´ä»¶ä¼ å¼\n    console.log(\"comData\", comData)\n    this.data = comData.configData.data\n    this.color = comData.configData.color\n  }\n\n  ngOnInit() {\n    if (!this.data.autoplay) {\n      this.initPageConfig()\n    }\n  }\n\n  initPageConfig() {\n    console.log(\"æ§è¡initPageConfig\")\n    let num = 0 //æ»å±å¤å°å smallå 1 mediumå 2\n    let columns = this.data.columns //æ¯è¡å¤å°ä¸ª\n    let onePageCardNum = 4 * columns //æ¯é¡µæå¤å¤å°ä¸ª\n\n    let pageData = []\n\n    let currentPage = []; // å­å¨å½åé¡µçæ°æ®\n    let remainingBlocks = onePageCardNum; // å½åé¡µå©ä½å¯å®¹çº³åæ°\n\n    for (const item of this.data.list) {\n      let blockCount = 0; // å½åitemå æ®çåæ°\n      if (item.size === \"small\") {\n        blockCount = 1\n      } else if (item.size === \"medium\") {\n        blockCount = 2\n      } else {\n        blockCount = 1\n      }\n\n      num += blockCount\n\n      // å¦æå½åitemå¯ä»¥æ¾å¥å½åé¡µ\n      if (blockCount <= remainingBlocks) {\n        currentPage.push(item);\n        remainingBlocks -= blockCount;\n      }\n\n      // å¦æå½åé¡µå·²æ»¡ï¼å°å½åé¡µæ°æ®æ·»å å°äºç»´æ°ç»ä¸­ï¼å¹¶éæ°åå§åå½åé¡µ\n      if (remainingBlocks <= 0) {\n        pageData.push(currentPage);\n        currentPage = [];\n        remainingBlocks = onePageCardNum;\n      }\n    }\n\n    // å¤çæåä¸é¡µï¼å¦ææå©ä½åæ°ï¼æ·»å å°äºç»´æ°ç»ä¸­\n    if (currentPage.length > 0) {\n      pageData.push(currentPage);\n    }\n\n    let pageCount = Math.ceil(num / onePageCardNum)\n    console.log(\"num\", num)\n    console.log(\"pageCount\", pageCount)\n    console.log(\"pageData\", pageData)\n    this.pageData = pageData\n  }\n\n  pageChange(index: number) {\n    if (index < 0) {\n      return\n    }\n    if (index > this.pageData.length - 1) {\n      return\n    }\n    this.pageIndex = index\n    console.log(\"pageIndex\", this.pageIndex)\n  }\n\n  clickLeft() {\n    const container = this.scrollContainerDiv.nativeElement\n    let px = 256 * (this.data.playCardNum || 1)\n    this.scrollLeft = container.scrollLeft - px\n    container.scrollLeft -= px;\n  }\n\n  clickRight() {\n    const container = this.scrollContainerDiv.nativeElement\n    let px = 256 * (this.data.playCardNum || 1)\n    this.scrollLeft = container.scrollLeft + px\n    container.scrollLeft += px;\n  }\n\n  calculateGridTemplateColumns() {\n    return this.data.columns ? `repeat(${this.data.columns}, 1fr)` : 'repeat(4, 1fr)';\n  }\n\n  checkLike(item) {\n    item.isLike = !item.isLike\n  }\n\n  getTagBackgroundImage(tag) {\n    let length = tag.length\n    console.log(\"tag\", length)\n    if (length >= 4) {\n      return 'url(assets/carousel-card/image/tag-bg-4.png)'\n    } else if (length >= 3) {\n      return 'url(assets/carousel-card/image/tag-bg-3.png)'\n    } else {\n      return 'url(assets/carousel-card/image/tag-bg-2.png)'\n    }\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CarouselCardComponent } from './carousel-card.component';\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\nimport { CommonModule } from '@angular/common'\n\n@NgModule({\n  declarations: [CarouselCardComponent],\n  entryComponents: [CarouselCardComponent],\n  imports: [CommonModule, NgZorroAntdModule],\n  exports: [CarouselCardComponent]\n})\nexport class CarouselCardModule { }\n","import { createPlugin } from 'plugin-manager';\nimport { CarouselCardComponent } from './lib/carousel-card.component';\nimport { CarouselCardModule } from './lib/carousel-card.module';\n\nexport default createPlugin({\n  name: 'carousel-card',\n  module: CarouselCardModule,\n  component: CarouselCardComponent\n});"],"names":[],"mappings":"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"}
