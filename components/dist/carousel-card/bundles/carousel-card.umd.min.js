!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("plugin-manager"),require("@angular/core"),require("ng-zorro-antd"),require("@angular/common")):"function"==typeof define&&define.amd?define("carousel-card",["plugin-manager","@angular/core","ng-zorro-antd","@angular/common"],t):e["carousel-card"]=t(e.pluginManager,e.ng.core,e.ngZorroAntd,e.ng.common)}(this,function(e,t,i,a){"use strict";o.prototype.ngOnInit=function(){this.data.autoplay||this.initPageConfig()},o.prototype.initPageConfig=function(){console.log("执行initPageConfig");var e,t=0,i=4*this.data.columns,a=[],n=[],o=i;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],a=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&a>=e.length?void 0:e)&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.data.list),s=r.next();!s.done;s=r.next()){var l=s.value,c=0;t+=c="small"!==l.size&&"medium"===l.size?2:1,c<=o&&(n.push(l),o-=c),o<=0&&(a.push(n),n=[],o=i)}}catch(d){e={error:d}}finally{try{s&&!s.done&&(g=r["return"])&&g.call(r)}finally{if(e)throw e.error}}0<n.length&&a.push(n);var g=Math.ceil(t/i);console.log("num",t),console.log("pageCount",g),console.log("pageData",a),this.pageData=a},o.prototype.pageChange=function(e){e<0||e>this.pageData.length-1||(this.pageIndex=e,console.log("pageIndex",this.pageIndex))},o.prototype.clickLeft=function(){var e=this.scrollContainerDiv.nativeElement,t=256*(this.data.playCardNum||1);this.scrollLeft=e.scrollLeft-t,e.scrollLeft-=t},o.prototype.clickRight=function(){var e=this.scrollContainerDiv.nativeElement,t=256*(this.data.playCardNum||1);this.scrollLeft=e.scrollLeft+t,e.scrollLeft+=t},o.prototype.calculateGridTemplateColumns=function(){return this.data.columns?"repeat("+this.data.columns+", 1fr)":"repeat(4, 1fr)"},o.prototype.checkLike=function(e){e.isLike=!e.isLike},o.prototype.getTagBackgroundImage=function(e){e=e.length;return console.log("tag",e),4<=e?"url(assets/carousel-card/image/tag-bg-4.png)":3<=e?"url(assets/carousel-card/image/tag-bg-3.png)":"url(assets/carousel-card/image/tag-bg-2.png)"},o.decorators=[{type:t.Component,args:[{selector:"llib-carousel-card",template:'<div class="carousel-card">\n\n  \x3c!-- 一行自动播放布局 --\x3e\n  <div class="display-row-box" *ngIf="data.autoplay">\n    <div class="card-list-row" #scrollContainer>\n      <div class="card card-r" *ngFor="let item of data.list">\n        <div class="top-box">\n          <span>{{item.title}}</span>\n          <img class="icon-like" (click)="checkLike(item)" *ngIf="item.isLike"\n            src="assets/carousel-card/image/icon-like-1.png" alt="">\n          <img class="icon-like" (click)="checkLike(item)" *ngIf="!item.isLike"\n            src="assets/carousel-card/image/icon-like-0.png" alt="">\n        </div>\n        <div class="content-box">\n          <img class="cover-img" [src]="item.cover" alt=""\n            [ngStyle]="{\'width\':item.coverWidth || \'100%\',\'height\': item.coverHeight || \'100%\'}">\n          <div class="mask-box">\n            <div class="hover-btn" *ngFor="let btn of item.hoverBtn"\n              [ngStyle]="{\'fontSize\': item.hoverBtnSize || \'14px\'}">\n              {{btn.text}}\n            </div>\n          </div>\n        </div>\n        <div class="bottom-box">\n          <div class="tags">\n            <div class="tag-item" *ngFor="let tag of item.tags"\n              [ngStyle]="{\'background-image\': getTagBackgroundImage(tag)}">{{tag}}</div>\n          </div>\n          <div>\n            <img class="icon-count" src="assets/carousel-card/image/icon-count.png" alt="">\n            <span class="count-text">{{item.num || 0}}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="row-left-box" *ngIf="scrollLeft > 0">\n      <img (click)="clickLeft()" src="assets/carousel-card/image/icon-right.png" alt="">\n    </div>\n    <div class="row-right-box">\n      <img (click)="clickRight()" src="assets/carousel-card/image/icon-right.png" alt="">\n    </div>\n  </div>\n\n\n  \x3c!-- grid布局 --\x3e\n  <div class="card-list" *ngIf="!data.autoplay" [ngStyle]="{\'grid-template-columns\':calculateGridTemplateColumns()}">\n    <div class="card" *ngFor="let item of pageData[pageIndex]"\n      [ngClass]="{\'card-m\': item.size == \'medium\', \'card-s\': item.size == \'small\'}">\n      <div class="top-box">\n        <span>{{item.title}}</span>\n        <img class="icon-like" *ngIf="item.isLike" (click)="checkLike(item)"\n          src="assets/carousel-card/image/icon-like-1.png" alt="">\n        <img class="icon-like" *ngIf="!item.isLike" (click)="checkLike(item)"\n          src="assets/carousel-card/image/icon-like-0.png" alt="">\n      </div>\n      <div class="content-box">\n        <img class="cover-img" [src]="item.cover" alt=""\n          [ngStyle]="{\'width\':item.coverWidth || \'100%\',\'height\': item.coverHeight || \'100%\'}">\n        <div class="mask-box">\n          <div class="hover-btn" *ngFor="let btn of item.hoverBtn"\n            [ngStyle]="{\'fontSize\': item.hoverBtnSize || \'14px\'}">\n            {{btn.text}}\n          </div>\n        </div>\n      </div>\n      <div class="bottom-box">\n        <div class="tags">\n          <div class="tag-item" *ngFor="let tag of item.tags"\n            [ngStyle]="{\'background-image\': getTagBackgroundImage(tag)}">{{tag}}</div>\n        </div>\n        <div>\n          <img class="icon-count" src="assets/carousel-card/image/icon-count.png" alt="">\n          <span class="count-text">{{item.num || 0}}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- 分页盒子 --\x3e\n  <div class="pagination-box" *ngIf="!data.autoplay">\n    <div class="page-btn" (click)="pageChange(pageIndex-1)">&lt;</div>\n    <div class="page-btn" [ngClass]="{\'page-btn-check\': pageIndex == i}" *ngFor="let page of pageData;let i = index"\n      (click)="pageChange(i)">{{i+1}}</div>\n    <div class="page-btn" (click)="pageChange(pageIndex+1)">&gt;</div>\n  </div>\n</div>',styles:[".carousel-card{width:100%;height:100%;overflow:hidden;display:flex;flex-direction:column}.display-row-box{position:relative}.card-list-row{display:flex;overflow-x:scroll;scroll-behavior:smooth;white-space:nowrap}.card-list-row:hover::-webkit-scrollbar-thumb,.card-list:hover::-webkit-scrollbar-thumb{background-color:#888}.card-list-row::-webkit-scrollbar{height:5px}.card-list::-webkit-scrollbar{width:5px}.card-list-row::-webkit-scrollbar-track,.card-list::-webkit-scrollbar-track{background-color:transparent}.card-list-row::-webkit-scrollbar-thumb,.card-list::-webkit-scrollbar-thumb{background-color:transition;border-radius:6px}.card-list-row::-webkit-scrollbar-corner,.card-list::-webkit-scrollbar-corner{background-color:transparent}.row-right-box{background-image:linear-gradient(269deg,#02050f 43%,rgba(2,5,15,0) 100%);position:absolute;height:211px;width:100px;z-index:11;right:0;top:0;display:flex;justify-content:flex-end;align-items:center}.row-left-box{background-image:linear-gradient(269deg,#02050f 43%,rgba(2,5,15,0) 100%);position:absolute;height:211px;width:100px;z-index:11;left:0;top:0;display:flex;justify-content:flex-end;align-items:center;transform:rotateY(180deg)}.row-left-box img,.row-right-box img{width:32px;height:32px;cursor:pointer}.card-list{display:grid;grid-template-columns:repeat(4,1fr);row-gap:30px;-moz-column-gap:25px;column-gap:25px;box-sizing:border-box;flex:1;overflow-y:auto}.card{height:247px;display:flex;flex-direction:column;overflow:hidden;box-sizing:border-box;color:#fff;border-radius:6px 6px 12px 12px;background-size:100% 100%;background-repeat:no-repeat;flex-shrink:0}.card-r{background-image:url(assets/carousel-card/image/card-s.png);width:244px;height:211px;margin-right:12px}.card-m{grid-column:span 2;background-image:url(assets/carousel-card/image/card-m.png)}.card-s{grid-column:span 1;background-image:url(assets/carousel-card/image/card-s.png)}.top-box{font-size:16px;padding:0 12px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;height:30px}.content-box{flex:1;box-sizing:border-box;padding:12px 18px 9px 12px;overflow:hidden;position:relative;display:flex;justify-content:center;align-items:center}.bottom-box{height:40px;padding:0 12px;box-sizing:border-box;display:flex;align-items:center;display:flex;justify-content:space-between;align-items:center;font-size:12px}.tags{display:flex}.tag-item{background-image:url(assets/carousel-card/image/tag-bg.png);background-repeat:no-repeat;margin-right:5px;background-size:100% 100%;padding:2px 14px 2px 8px;box-sizing:border-box;font-weight:400}.count-text{margin-left:5px}.cover-img{height:100%;width:100%;border-radius:4px}.icon-like{width:14px;height:14px}.icon-count{opacity:.8}.mask-box{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:10;justify-content:center;align-items:center;display:none}.card:hover .mask-box{display:flex}.mask-box .hover-btn{background-image:linear-gradient(180deg,#18517c 0,rgba(24,81,124,.5) 100%);background-size:100% 100%;border-radius:4px;box-sizing:border-box;display:flex;align-items:center;padding:0 10px;font-size:14px;overflow:hidden;cursor:pointer;margin-right:5px}.mask-box .hover-btn:last-child{margin-right:0}.pagination-box{display:flex;justify-content:center;margin-top:20px}.page-btn{width:32px;height:32px;background-image:linear-gradient(179deg,#070c18 0,#102e49 100%);border-radius:4px;display:flex;justify-content:center;align-items:center;color:#fff;cursor:pointer;margin-right:5px;font-size:14px;transition:.3s}.page-btn:last-child{margin-right:0}.page-btn-check{background-image:linear-gradient(179deg,rgba(55,178,255,.1) 0,rgba(55,178,255,.88) 100%)}"]}]}],o.ctorParameters=function(){return[{type:e.PluginManagerService},{type:e.componentData}]},o.propDecorators={scrollContainerDiv:[{type:t.ViewChild,args:["scrollContainer"]}]};var n=o;function o(e,t){this.pluginManagerService=e,this.pageIndex=0,this.scrollLeft=0,console.log("comData",t),this.data=t.configData.data,this.color=t.configData.color}function r(){}return r.decorators=[{type:t.NgModule,args:[{declarations:[n],entryComponents:[n],imports:[a.CommonModule,i.NgZorroAntdModule],exports:[n]}]}],e.createPlugin({name:"carousel-card",module:r,component:n})});
//# sourceMappingURL=carousel-card.umd.min.js.map