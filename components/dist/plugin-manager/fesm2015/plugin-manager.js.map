{"version":3,"file":"plugin-manager.js.map","sources":["ng://plugin-manager/lib/plugin-manager.module.ts","ng://plugin-manager/lib/common-deps.ts","ng://plugin-manager/lib/plugin-manager.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule\n  ],\n  exports: []\n})\nexport class PluginManagerModule { }\n","import * as core from '@angular/core';\r\nimport * as common from '@angular/common';\r\nimport * as forms from '@angular/forms';\r\nimport * as router from '@angular/router';\r\nimport * as rxjs from 'rxjs';\r\nimport * as tslib from 'tslib';\r\nimport * as NgZorro from 'ng-zorro-antd';\r\nimport * as manager from '../public_api';\r\nimport * as operators from 'rxjs/operators';\r\nimport * as le5leStore from 'le5le-store';\r\nimport * as fileSaver from 'file-saver';\r\nimport * as http from '@angular/common/http';\r\nexport const COMMON_DEPS = {\r\n  '@angular/core': core,\r\n  '@angular/common': common,\r\n  '@angular/forms': forms,\r\n  '@angular/router': router,\r\n  'ng-zorro-antd': NgZorro,\r\n  'plugin-manager': manager,\r\n  'rxjs/operators': operators,\r\n  'le5le-store': le5leStore,\r\n  'file-saver': fileSaver,\r\n  '@angular/common/http': http,\r\n  rxjs,\r\n  tslib,\r\n};\r\n\r\n","import {Injectable, Type} from '@angular/core';\nimport {PluginManagerModule} from './plugin-manager.module';\nimport {COMMON_DEPS} from './common-deps';\nimport {BehaviorSubject} from 'rxjs';\n\nconst SystemJs = (window as any).System;\n\nexport abstract class componentData {\n  constructor(public configData: any) {}\n}\n\nexport class PluginData extends componentData {\n}\n\nexport function createPlugin(config: {\n  name: string;\n  module: Type<any>;\n  component: Type<any>\n}) {\n  return new NgPlugin(config.name, config.module, config.component);\n}\n\nexport class NgPlugin {\n  constructor(\n    public name: string,\n    public module: Type<any>,\n    public component: Type<any>) {\n  }\n}\n\n@Injectable({\n  providedIn: PluginManagerModule\n})\nexport class PluginManagerService {\n\n  public filterVa$ = new BehaviorSubject<any>(null);\n\n  depsDefined = false;\n  content: any;\n  name: any;\n  componentData: any;\n\n  constructor() { }\n\n  // æ¥æ¶ç»ä»¶ä¼ å¼\n  compToMid(data) {\n    this.filterVa$.next(data);\n    console.log(data);\n  }\n\n  // ç»ç»ä»¶ä¼ å¼\n  midToComp() {\n    console.log(this.componentData);\n    return this.componentData;\n  }\n\n  // æ¥æ¶ä¸»æ¡æ¶ä»£ç ä¼ å¼\n  parentToMid(data) {\n    this.componentData = data;\n    console.log(data);\n  }\n\n  // ç»ä¸»æ¡æ¶ä¼ å¼\n  midToParent() {\n    console.log(2);\n  }\n\n\n  defineDeps() {\n    if (this.depsDefined) {\n      return;\n    }\n    Object.keys(COMMON_DEPS).forEach(dep =>\n      (window as any).define(dep, [], () => COMMON_DEPS[ dep ])\n    );\n    this.depsDefined = true;\n  }\n\n  setData(data) {\n    this.content = data;\n  }\n\n  getData() {\n    return this.content;\n  }\n\n  set filterVal(name) {\n    this.name = name;\n    console.log(this.name);\n  }\n\n  get filterVal() {\n    console.log(this.name);\n    return this.name;\n  }\n\n  loadModule(name: string): Promise<NgPlugin> {\n    this.defineDeps();\n    return SystemJs.import(`./assets/${name}/${name}.umd.js`)\n      .then(() => SystemJs.import(name))\n      .then(plugin => {\n        if (plugin instanceof NgPlugin) {\n          return Promise.resolve(plugin);\n        } else {\n          throw new TypeError('This module is not a valid plugin');\n        }\n      });\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAUa,mBAAmB;;;YAP/B,QAAQ,SAAC;gBACR,YAAY,EAAE,EAAE;gBAChB,OAAO,EAAE;oBACP,YAAY;iBACb;gBACD,OAAO,EAAE,EAAE;aACZ;;;;;;;;ACTD;AAYA,MAAa,WAAW,GAAG;IACzB,eAAe,EAAE,IAAI;IACrB,iBAAiB,EAAE,MAAM;IACzB,gBAAgB,EAAE,KAAK;IACvB,iBAAiB,EAAE,MAAM;IACzB,eAAe,EAAE,OAAO;IACxB,gBAAgB,EAAE,OAAO;IACzB,gBAAgB,EAAE,SAAS;IAC3B,aAAa,EAAE,UAAU;IACzB,YAAY,EAAE,SAAS;IACvB,sBAAsB,EAAE,IAAI;IAC5B,IAAI;IACJ,KAAK;CACN;;;;;;;ACzBD;MAKM,QAAQ,GAAG,oBAAC,MAAM,IAAS,MAAM;;;;AAEvC,MAAsB,aAAa;;;;IACjC,YAAmB,UAAe;QAAf,eAAU,GAAV,UAAU,CAAK;KAAI;CACvC;MAEY,UAAW,SAAQ,aAAa;CAC5C;;;;;AAED,SAAgB,YAAY,CAAC,MAI5B;IACC,OAAO,IAAI,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC;CACnE;AAED,MAAa,QAAQ;;;;;;IACnB,YACS,IAAY,EACZ,MAAiB,EACjB,SAAoB;QAFpB,SAAI,GAAJ,IAAI,CAAQ;QACZ,WAAM,GAAN,MAAM,CAAW;QACjB,cAAS,GAAT,SAAS,CAAW;KAC5B;CACF;MAKY,oBAAoB;IAS/B;QAPO,cAAS,GAAG,IAAI,eAAe,CAAM,IAAI,CAAC,CAAC;QAElD,gBAAW,GAAG,KAAK,CAAC;KAKH;;;;;;IAGjB,SAAS,CAAC,IAAI;QACZ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;KACnB;;;;;IAGD,SAAS;QACP,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAChC,OAAO,IAAI,CAAC,aAAa,CAAC;KAC3B;;;;;;IAGD,WAAW,CAAC,IAAI;QACd,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;KACnB;;;;;IAGD,WAAW;QACT,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KAChB;;;;IAGD,UAAU;QACR,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,OAAO;SACR;QACD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,OAAO;;;;QAAC,GAAG,IAClC,oBAAC,MAAM,IAAS,MAAM,CAAC,GAAG,EAAE,EAAE;;;QAAE,MAAM,WAAW,CAAE,GAAG,CAAE,EAAC,EAC1D,CAAC;QACF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;KACzB;;;;;IAED,OAAO,CAAC,IAAI;QACV,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;KACrB;;;;IAED,OAAO;QACL,OAAO,IAAI,CAAC,OAAO,CAAC;KACrB;;;;;IAED,IAAI,SAAS,CAAC,IAAI;QAChB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KACxB;;;;IAED,IAAI,SAAS;QACX,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvB,OAAO,IAAI,CAAC,IAAI,CAAC;KAClB;;;;;IAED,UAAU,CAAC,IAAY;QACrB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,OAAO,QAAQ,CAAC,MAAM,CAAC,YAAY,IAAI,IAAI,IAAI,SAAS,CAAC;aACtD,IAAI;;;QAAC,MAAM,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAC;aACjC,IAAI;;;;QAAC,MAAM;YACV,IAAI,MAAM,YAAY,QAAQ,EAAE;gBAC9B,OAAO,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;aAChC;iBAAM;gBACL,MAAM,IAAI,SAAS,CAAC,mCAAmC,CAAC,CAAC;aAC1D;SACF,EAAC,CAAC;KACN;;;YA7EF,UAAU,SAAC;gBACV,UAAU,EAAE,mBAAmB;aAChC;;;;;;;;;;;;;;;;;;;;"}
