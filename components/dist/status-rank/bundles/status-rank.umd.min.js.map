{"version":3,"sources":["ng://status-rank/lib/status-rank.component.ts","ng://status-rank/lib/status-rank.module.ts","ng://status-rank/public-api.ts"],"sourcesContent":["import { Component, OnInit, ViewChild, ElementRef } from \"@angular/core\";\nimport { PluginManagerService, componentData } from \"plugin-manager\";\n\n@Component({\n  selector: \"lib-status-rank\",\n  templateUrl: \"./status-rank.component.html\",\n  styleUrls: [\"./status-rank.component.styl\"],\n})\nexport class StatusRankComponent implements OnInit {\n  @ViewChild(\"tbody\")\n  tbodyDiv: ElementRef;\n  data: any;\n  color: any;\n\n  constructor(\n    private pluginManagerService: PluginManagerService,\n    comData: componentData\n  ) {\n    // æ¥æ¶ä¸­é´ä»¶ä¼ å¼\n    console.log(\"comData\", comData);\n    this.data = comData.configData.data;\n    this.color = comData.configData.color;\n  }\n\n  getPercentage(value, list = []) {\n    let total = 0;\n\n    list.forEach((item) => {\n      total += item.value;\n    });\n\n    return (value / total) * 100 + \"%\";\n  }\n\n  ngOnInit() {\n    let rollingNum = this.data.rollingNum || 3\n    if (this.data.list.length <= rollingNum) {\n      return\n    }\n\n    const animateElements = () => {\n      const trList = this.tbodyDiv.nativeElement.querySelectorAll(\".wrap\");\n\n\n      trList.forEach((element, index) => {\n        if (index == 0) {\n          element.style.transform = \"translateY(-10px) rotateX(90deg)\";\n          trList[0].style.opacity = \"0\";\n          return\n        }\n        element.style.transform = \"translateY(-92px)\";\n      });\n\n      setTimeout(() => {\n        this.data.list.push(this.data.list.shift());\n\n        trList.forEach((element) => {\n          element.style.transition = \"none\";\n          element.style.transform = \"translate(0,0)\";\n          element.style.opacity = \"none\";\n          element.style.opacity = \"1\";\n          element.offsetHeight;\n          element.style.transition = \"all 0.5s ease\";\n        });\n      }, 500);\n    };\n    setInterval(animateElements, 3000);\n\n\n\n  }\n\n  getBodyHeight() {\n    const dataLength = this.data.list.length;\n    const rollingNum = this.data.rollingNum;\n    const num = dataLength > rollingNum ? rollingNum : dataLength;\n\n    return num * 72 + (num - 1) * 20 + \"px\";\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { StatusRankComponent } from './status-rank.component';\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\nimport { CommonModule } from '@angular/common'\n\n@NgModule({\n  declarations: [StatusRankComponent],\n  entryComponents: [StatusRankComponent],\n  imports: [CommonModule, NgZorroAntdModule],\n  exports: [StatusRankComponent]\n})\n\nexport class StatusRankModule { }\n","import { createPlugin } from \"plugin-manager\";\nimport { StatusRankComponent } from \"./lib/status-rank.component\";\nimport { StatusRankModule } from \"./lib/status-rank.module\";\n\nexport default createPlugin({\n  name: \"status-rank\",\n  module: StatusRankModule,\n  component: StatusRankComponent,\n});\n"],"names":["StatusRankComponent","prototype","getPercentage","value","list","total","forEach","item","ngOnInit","_this","this","rollingNum","data","length","setInterval","trList","tbodyDiv","nativeElement","querySelectorAll","element","index","style","transform","opacity","setTimeout","push","shift","transition","offsetHeight","getBodyHeight","dataLength","num","Component","args","selector","template","PluginManagerService","componentData","ViewChild","pluginManagerService","comData","console","log","configData","color","StatusRankModule","NgModule","declarations","entryComponents","imports","CommonModule","NgZorroAntdModule","exports","createPlugin","name","module","component"],"mappings":"6aAwBEA,EAAAC,UAAAC,cAAA,SAAcC,EAAOC,G,IACfC,EAAQ,EAMZ,OAPmBD,EAAA,KAAA,IAAAA,EAAA,GAGnBA,GAAKE,QAAO,SAAEC,GACZF,GAASE,EAAKJ,KACf,CAAA,EAEOA,EAAQE,EAAS,IAAM,G,EAGjCL,EAAAC,UAAAO,SAAA,WAAA,IAAAC,EAAAC,KACMC,EAAaD,KAAKE,KAAKD,YAAc,EACrCD,KAAKE,KAAKR,KAAKS,QAAUF,GA8B7BG,YA1BqB,W,IACbC,EAASN,EAAKO,SAASC,cAAcC,iBAAiB,OAAO,EAGnEH,EAAOT,QAAO,SAAEa,EAASC,GACV,GAATA,GACFD,EAAQE,MAAMC,UAAY,mCAC1BP,EAAO,GAAGM,MAAME,QAAU,KAG5BJ,EAAQE,MAAMC,UAAY,mBAC3B,CAAA,EAEDE,WAAU,WACRf,EAAKG,KAAKR,KAAKqB,KAAKhB,EAAKG,KAAKR,KAAKsB,MAAK,CAAE,EAE1CX,EAAOT,QAAO,SAAEa,GACdA,EAAQE,MAAMM,WAAa,OAC3BR,EAAQE,MAAMC,UAAY,iBAC1BH,EAAQE,MAAME,QAAU,OACxBJ,EAAQE,MAAME,QAAU,IACxBJ,EAAQS,aACRT,EAAQE,MAAMM,WAAa,eAC5B,CAAA,CACF,EAAE,GAAG,CACP,EAC4B,GAAI,C,EAMnC3B,EAAAC,UAAA4B,cAAA,W,IACQC,EAAapB,KAAKE,KAAKR,KAAKS,OAC5BF,EAAaD,KAAKE,KAAKD,WACvBoB,EAAmBpB,EAAbmB,EAA0BnB,EAAamB,EAEnD,OAAa,GAANC,EAAuB,IAAXA,EAAM,GAAU,I,sBA1EtCC,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,kBACVC,SAAA,0kG,sjIAED,G,yCANQC,EAAAA,oBAAoB,E,MAAEC,EAAAA,aAAa,E,oCAQzCC,EAAAA,UAASL,KAAA,CAAC,QAAO,E,EANpB,IAAAjC,EA4EAA,EAjEE,SAAAA,EACUuC,EACRC,GADQ9B,KAAA6B,qBAAAA,EAIRE,QAAQC,IAAI,UAAWF,CAAO,EAC9B9B,KAAKE,KAAO4B,EAAQG,WAAW/B,KAC/BF,KAAKkC,MAAQJ,EAAQG,WAAWC,K,CChBpC,SAAAC,K,2BAACC,EAAAA,SAAQb,KAAA,CAAC,CACRc,aAAc,CAAC/C,GACfgD,gBAAiB,CAAChD,GAClBiD,QAAS,CAACC,EAAAA,aAAcC,EAAAA,mBACxBC,QAAS,CAACpD,E,EACX,GCNcqD,EAAAA,aAAa,CAC1BC,KAAM,cACNC,ODM8BV,ECL9BW,UAAWxD,C,CACZ,C"}