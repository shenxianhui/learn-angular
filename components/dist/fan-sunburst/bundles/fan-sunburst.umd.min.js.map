{"version":3,"sources":["ng://fan-sunburst/lib/fan-sunburst.component.ts","ng://fan-sunburst/lib/fan-sunburst.module.ts","ng://fan-sunburst/public-api.ts"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { PluginManagerService, componentData } from 'plugin-manager';\n\nconst $: any = (window as any).$;\nconst echarts: any = (window as any).echarts;\n\n@Component({\n  selector: 'lib-fan-sunburst',\n  templateUrl: './fan-sunburst.component.html',\n  styleUrls: ['./fan-sunburst.component.styl']\n})\nexport class FanSunburstComponent implements OnInit {\n\n  data: any;\n  color: any;\n  current: any;\n  myChart: any;\n\n  @ViewChild('fansunburst')\n  fansunburstDiv: ElementRef\n\n  constructor(private pluginManagerService: PluginManagerService, comData: componentData) {\n    // æ¥æ¶ä¸­é´ä»¶ä¼ å¼\n    console.log(\"comData\", comData)\n    this.data = comData.configData.data\n    this.color = comData.configData.color\n  }\n\n  ngOnInit() {\n    let chartDom = this.fansunburstDiv.nativeElement\n    this.myChart = echarts.init(chartDom)\n\n    this.current = 0\n    this.setOption()\n\n    window.addEventListener('resize',()=>{\n      if(this.myChart){\n        this.myChart.resize()\n      }\n    })\n  }\n\n  setOption(){\n    let current = this.current\n    let num = this.data[current].num\n    let totalNum = this.data[current].totalNum\n    \n    let option = {\n      title: {\n        show: true,\n        text: [\"{b|æ°é\\n}\", `{a|${num}} `].join(\"\"),\n        textStyle: {\n          rich: {\n            a: {\n              color: \"#52d2ff\",\n              fontSize: 24,\n              height: 60\n            },\n            b: {\n              color: \"#fff\",\n              fontSize: 14,\n              lineHeight: 14\n            }\n          }\n        },\n        left: \"center\",\n        bottom: '23%',\n      },\n      tooltip: {\n        show: false\n      },\n\n      series: [\n        {\n          min: 0,\n          max: totalNum,\n          radius: '100%',\n          type: 'gauge',\n          startAngle: 180,\n          endAngle: 0,\n          center: ['50%', '75%'],\n          axisLine: {\n            lineStyle: {\n              color: [\n                [num / totalNum, new echarts.graphic.LinearGradient(\n                  0, 1, 1, 0, [{\n                    offset: 0,\n                    color: 'rgba(82,210,255,0.3)',\n                  },\n                  {\n                    offset: 1,\n                    color: '#52d2ff',\n                  }\n                ]\n                )],\n                [num / totalNum + 0.01, 'transparent'],\n                [1, new echarts.graphic.LinearGradient(\n                  0, 1, 1, 0, [{\n                    offset: 0,\n                    color: 'rgba(255,255,255,0.80)',\n                  },\n                  {\n                    offset: 1,\n                    color: 'rgba(255,255,255,0.3)',\n                  }\n                ]\n                )\n\n                ]\n              ],\n              width: 20,\n            }\n          },\n          axisLabel: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          },\n          splitLine: {\n            show: false\n          },\n          pointer: {\n            show: false\n          },\n          detail: {\n            show: false\n          },\n          data: []\n        },\n        {\n          // äº®çº¿\n          name: '',\n          z: 5,\n          type: 'pie',\n          cursor: 'default',\n          radius: ['67%', '67%'],\n          center: ['50%', '75%'],\n          hoverAnimation: false,\n          legendHoverLink: false,\n          labelLine: {\n            normal: {\n              show: false,\n            },\n          },\n          data: [\n            {\n              value: 1,\n              itemStyle: {\n                normal: {\n                  borderWidth: 3,\n                  borderColor: {\n                    type: 'linear',\n                    x: 0,\n                    y: 0,\n                    x2: 0,\n                    y2: 1,\n                    colorStops: [{\n                      offset: 0, color: '#fff'\n                    }, {\n                      offset: 0.5, color: 'rgba(255,255,255,0)'\n                    }],\n                    globalCoord: false\n                  }\n                },\n              },\n            },\n          ],\n        },\n        {\n          type: 'gauge',\n          startAngle: 180,\n          endAngle: 0,\n          radius: '65%',\n          center: ['50%', '75%'],\n          axisLine: {\n            lineStyle: {\n              color: [\n                [0, 'rgb(34,46,61)'],\n                [1, 'rgb(34,46,61)']\n              ],\n              width: 50\n            }\n          },\n          splitNumber: 6,\n          splitLine: {\n            distance: -50,\n            length: 51,\n            lineStyle: {\n              width: 10,\n              color: 'rgb(5,26,46)'\n            }\n          },\n          pointer: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          },\n          axisLabel: {\n            show: false\n          },\n          detail: {\n            show: false\n          },\n          data: [{ value: 0, name: '' }]\n        },\n      ]\n    }\n    \n    option && this.myChart.setOption(option)\n  }\n\n  previous(){\n    if(this.current <= 0){\n      this.current = this.data.length - 1\n    }else{\n      this.current = this.current - 1\n    }\n    console.log('ç¹å»äºä¸ä¸ä¸ª',this.current)\n    this.setOption()\n  }\n\n  next(){\n    if(this.data.length <= this.current + 1){\n      this.current = 0\n    }else{\n      this.current = this.current + 1\n    }\n    console.log('ç¹å»äºä¸ä¸ä¸ª',this.current)\n    this.setOption()\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { FanSunburstComponent } from './fan-sunburst.component';\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\nimport { CommonModule } from '@angular/common'\n\n@NgModule({\n  declarations: [FanSunburstComponent],\n  entryComponents: [FanSunburstComponent],\n  imports: [CommonModule, NgZorroAntdModule],\n  exports: [FanSunburstComponent]\n})\n\nexport class FanSunburstModule { }\n","import { createPlugin } from 'plugin-manager';\nimport { FanSunburstComponent } from './lib/fan-sunburst.component';\nimport { FanSunburstModule } from './lib/fan-sunburst.module';\n\nexport default createPlugin({\n  name: 'fan-sunburst',\n  module: FanSunburstModule,\n  component: FanSunburstComponent\n});"],"names":["$","echarts","FanSunburstComponent","prototype","ngOnInit","_this","this","chartDom","fansunburstDiv","nativeElement","myChart","init","current","setOption","window","addEventListener","resize","num","data","totalNum","option","title","show","text","join","textStyle","rich","a","color","fontSize","height","b","lineHeight","left","bottom","tooltip","series","min","max","radius","type","startAngle","endAngle","center","axisLine","lineStyle","graphic","LinearGradient","offset","width","axisLabel","axisTick","splitLine","pointer","detail","name","z","cursor","hoverAnimation","legendHoverLink","labelLine","normal","value","itemStyle","borderWidth","borderColor","x","y","x2","y2","colorStops","globalCoord","splitNumber","distance","length","previous","console","log","next","Component","args","selector","template","PluginManagerService","componentData","ViewChild","pluginManagerService","comData","configData","FanSunburstModule","NgModule","declarations","entryComponents","imports","CommonModule","NgZorroAntdModule","exports","createPlugin","module","component"],"mappings":"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"}