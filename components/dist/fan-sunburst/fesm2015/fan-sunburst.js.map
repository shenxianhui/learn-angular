{"version":3,"file":"fan-sunburst.js.map","sources":["ng://fan-sunburst/lib/fan-sunburst.component.ts","ng://fan-sunburst/lib/fan-sunburst.module.ts","ng://fan-sunburst/public-api.ts"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { PluginManagerService, componentData } from 'plugin-manager';\n\nconst $: any = (window as any).$;\nconst echarts: any = (window as any).echarts;\n\n@Component({\n  selector: 'lib-fan-sunburst',\n  templateUrl: './fan-sunburst.component.html',\n  styleUrls: ['./fan-sunburst.component.styl']\n})\nexport class FanSunburstComponent implements OnInit {\n\n  data: any;\n  color: any;\n  current: any;\n  myChart: any;\n\n  @ViewChild('fansunburst')\n  fansunburstDiv: ElementRef\n\n  constructor(private pluginManagerService: PluginManagerService, comData: componentData) {\n    // æ¥æ¶ä¸­é´ä»¶ä¼ å¼\n    console.log(\"comData\", comData)\n    this.data = comData.configData.data\n    this.color = comData.configData.color\n  }\n\n  ngOnInit() {\n    let chartDom = this.fansunburstDiv.nativeElement\n    this.myChart = echarts.init(chartDom)\n\n    this.current = 0\n    this.setOption()\n\n    window.addEventListener('resize',()=>{\n      if(this.myChart){\n        this.myChart.resize()\n      }\n    })\n  }\n\n  setOption(){\n    let current = this.current\n    let num = this.data[current].num\n    let totalNum = this.data[current].totalNum\n    \n    let option = {\n      title: {\n        show: true,\n        text: [\"{b|æ°é\\n}\", `{a|${num}} `].join(\"\"),\n        textStyle: {\n          rich: {\n            a: {\n              color: \"#52d2ff\",\n              fontSize: 24,\n              height: 60\n            },\n            b: {\n              color: \"#fff\",\n              fontSize: 14,\n              lineHeight: 14\n            }\n          }\n        },\n        left: \"center\",\n        bottom: '23%',\n      },\n      tooltip: {\n        show: false\n      },\n\n      series: [\n        {\n          min: 0,\n          max: totalNum,\n          radius: '100%',\n          type: 'gauge',\n          startAngle: 180,\n          endAngle: 0,\n          center: ['50%', '75%'],\n          axisLine: {\n            lineStyle: {\n              color: [\n                [num / totalNum, new echarts.graphic.LinearGradient(\n                  0, 1, 1, 0, [{\n                    offset: 0,\n                    color: 'rgba(82,210,255,0.3)',\n                  },\n                  {\n                    offset: 1,\n                    color: '#52d2ff',\n                  }\n                ]\n                )],\n                [num / totalNum + 0.01, 'transparent'],\n                [1, new echarts.graphic.LinearGradient(\n                  0, 1, 1, 0, [{\n                    offset: 0,\n                    color: 'rgba(255,255,255,0.80)',\n                  },\n                  {\n                    offset: 1,\n                    color: 'rgba(255,255,255,0.3)',\n                  }\n                ]\n                )\n\n                ]\n              ],\n              width: 20,\n            }\n          },\n          axisLabel: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          },\n          splitLine: {\n            show: false\n          },\n          pointer: {\n            show: false\n          },\n          detail: {\n            show: false\n          },\n          data: []\n        },\n        {\n          // äº®çº¿\n          name: '',\n          z: 5,\n          type: 'pie',\n          cursor: 'default',\n          radius: ['67%', '67%'],\n          center: ['50%', '75%'],\n          hoverAnimation: false,\n          legendHoverLink: false,\n          labelLine: {\n            normal: {\n              show: false,\n            },\n          },\n          data: [\n            {\n              value: 1,\n              itemStyle: {\n                normal: {\n                  borderWidth: 3,\n                  borderColor: {\n                    type: 'linear',\n                    x: 0,\n                    y: 0,\n                    x2: 0,\n                    y2: 1,\n                    colorStops: [{\n                      offset: 0, color: '#fff'\n                    }, {\n                      offset: 0.5, color: 'rgba(255,255,255,0)'\n                    }],\n                    globalCoord: false\n                  }\n                },\n              },\n            },\n          ],\n        },\n        {\n          type: 'gauge',\n          startAngle: 180,\n          endAngle: 0,\n          radius: '65%',\n          center: ['50%', '75%'],\n          axisLine: {\n            lineStyle: {\n              color: [\n                [0, 'rgb(34,46,61)'],\n                [1, 'rgb(34,46,61)']\n              ],\n              width: 50\n            }\n          },\n          splitNumber: 6,\n          splitLine: {\n            distance: -50,\n            length: 51,\n            lineStyle: {\n              width: 10,\n              color: 'rgb(5,26,46)'\n            }\n          },\n          pointer: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          },\n          axisLabel: {\n            show: false\n          },\n          detail: {\n            show: false\n          },\n          data: [{ value: 0, name: '' }]\n        },\n      ]\n    }\n    \n    option && this.myChart.setOption(option)\n  }\n\n  previous(){\n    if(this.current <= 0){\n      this.current = this.data.length - 1\n    }else{\n      this.current = this.current - 1\n    }\n    console.log('ç¹å»äºä¸ä¸ä¸ª',this.current)\n    this.setOption()\n  }\n\n  next(){\n    if(this.data.length <= this.current + 1){\n      this.current = 0\n    }else{\n      this.current = this.current + 1\n    }\n    console.log('ç¹å»äºä¸ä¸ä¸ª',this.current)\n    this.setOption()\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { FanSunburstComponent } from './fan-sunburst.component';\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\nimport { CommonModule } from '@angular/common'\n\n@NgModule({\n  declarations: [FanSunburstComponent],\n  entryComponents: [FanSunburstComponent],\n  imports: [CommonModule, NgZorroAntdModule],\n  exports: [FanSunburstComponent]\n})\n\nexport class FanSunburstModule { }\n","import { createPlugin } from 'plugin-manager';\nimport { FanSunburstComponent } from './lib/fan-sunburst.component';\nimport { FanSunburstModule } from './lib/fan-sunburst.module';\n\nexport default createPlugin({\n  name: 'fan-sunburst',\n  module: FanSunburstModule,\n  component: FanSunburstComponent\n});"],"names":[],"mappings":"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"}
